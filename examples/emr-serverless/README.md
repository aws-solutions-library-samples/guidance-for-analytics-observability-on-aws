
# EMR Serverless example with AWS Observability

This is an EMR Serverless example running a TPCDS benchmark that can be configured to send logs and metrics to Opensearch ingestion pipelines. 
The job will be run every 2 hours by default.

## Pre-requisites

Customize the `log4j2.properties` with the endpoint URL of the Opensearch ingestion for logs. 
The endpoint is generated by the CDK stack available in `infra` folder. The information is only available via the console or CLI (not in CDK yet)


## Deploy the EMR Serverless application

Create a virtualenv on MacOS and Linux:

```
$ python3 -m venv .venv
```

After the init process completes and the virtualenv is created, you can use the following
step to activate your virtualenv.

```
$ source .venv/bin/activate
```

If you are a Windows platform, you would activate the virtualenv like this:

```
% .venv\Scripts\activate.bat
```

Once the virtualenv is activated, you can install the required dependencies.

```
$ pip install -r requirements.txt
```

At this point deploy the resources.

```
$ cdk deploy
```

## Manually trigger the TPCS DS benchmark

From the console, run the Step Function deployed by the CDK application